
rule bam_sort_coord:
    """Sort alignments by genomic position."""
    input: "{prefix}.bam"
    output: "{prefix}_coord.bam"
    threads: 4
    shell: "samtools sort -@ {threads} -m 30G {input} {wildcards.prefix}_coord"

rule bam_sort_name:
    """Sort alignments by read name."""
    input: "{prefix}.bam"
    output: "{prefix}_name.bam"
    threads: 4
    shell: "samtools sort -n -@ {threads} -m 30G {input} {wildcards.prefix}_name"

rule bam_index:
    """Create BAM index."""
    input: "{prefix}.bam"
    output: "{prefix}.bam.bai"
    shell: "samtools index {input}"
